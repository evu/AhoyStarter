<?php/** * Add any Global site setup here including definitions, roles or custom variables *///Custom thumbnail support via features imagesadd_theme_support('post-thumbnails');add_image_size('archive-thumb', 500, 250, true);//Function run ion theme activationfunction ahoy_init(){	/*register_nav_menus(		array(			'header-menu-left' => 'Main Menu Left',			'header-menu-right' => 'Main Menu Right',			'footer-bottom' => 'Footer Bottom'		)	);*/	add_post_type_support('post', 'excerpt');	//Lock users out of admin section	if (is_admin() && !current_user_can('administrator') &&		!(defined('DOING_AJAX') && DOING_AJAX)	) {		wp_redirect(home_url());		exit;	}}add_action('init', 'ahoy_init');//Remove unused admin sections, uncomment to remove this for relevant usersfunction remove_menus(){	//Remove these pages for everyone	//remove_menu_page( 'index.php' );							//Dashboard	//remove_menu_page( 'edit.php' );						    //Posts	//remove_menu_page( 'upload.php' );							//Media	//remove_menu_page( 'edit.php?post_type=page' );			//Pages	//remove_menu_page( 'edit-comments.php' );					//Comments	//remove_menu_page( 'themes.php' );							//Appearance	//remove_menu_page( 'plugins.php' );						//Plugins	//remove_menu_page( 'users.php' );							//Users	//remove_menu_page( 'tools.php' );							//Tools	//remove_menu_page( 'options-general.php' );				//Settings	//remove_menu_page( 'edit.php?post_type=acf' );				//ACF	//remove_menu_page( 'admin.php?page=cpt_main_menu' );		//CPT UI	$admins = array(		'ahoycreative'	);	$current_user = wp_get_current_user();	if (!in_array($current_user->user_login, $admins)) {		remove_action( 'admin_notices', 'update_nag', 3 );			//remove_menu_page( 'index.php' );						//Dashboard		//remove_menu_page( 'update-core.php' );				//Dashboard		//remove_menu_page( 'edit.php' );						//Posts		//remove_menu_page( 'upload.php' );						//Media		//remove_menu_page( 'edit.php?post_type=page' );		//Pages		//remove_menu_page( 'edit-comments.php' );				//Comments		//remove_menu_page( 'themes.php' );						//Appearance		//remove_submenu_page( 'themes.php', 'widgets.php' )		//Appearence -> Widgets		//remove_submenu_page( 'themes.php', 'customize.php' )		//Appearence -> Customise		//remove_submenu_page( 'themes.php', 'therme-editor.php' )	//Appearence -> ThemeEditor		//remove_menu_page( 'plugins.php' );					//Plugins		//remove_menu_page( 'users.php' );						//Users		//remove_menu_page( 'tools.php' );						//Tools		//remove_menu_page( 'options-general.php' );			//Settings		//remove_menu_page( 'edit.php?post_type=acf' );			//ACF		//remove_menu_page( 'admin.php?page=cpt_main_menu' );	//CPT UI	}}add_action('admin_menu', 'remove_menus');//Add class to menu parent itemsfunction add_menu_parent_class($items){	$parents = array();	foreach ($items as $item) {		if ($item->menu_item_parent && $item->menu_item_parent > 0) {			$parents[] = $item->menu_item_parent;		}	}	foreach ($items as $item) {		if (in_array($item->ID, $parents)) {			$item->classes[] = 'menu-parent-item';		}	}	return $items;}add_filter('wp_nav_menu_objects', 'add_menu_parent_class');function add_parent_url_menu_class($classes = array(), $item = false){	// Get current URL	$current_url = current_url();	// Get homepage URL	$homepage_url = trailingslashit(get_bloginfo('url'));	// Exclude 404 and homepage	if (is_404() or $item->url == $homepage_url) return $classes;	if (strstr($current_url, $item->url)) {		// Add the 'parent_url' class		$classes[] = 'current-menu-item current_page_item';	}	return $classes;}function namespace_menu_classes($classes, $item){	if (get_post_type() == 'event' || is_archive('event')) {		// remove that unwanted classes if it's found		$classes = str_replace('current_page_parent', '', $classes);		// find the url you want and add the class you want		if ($item->url == '/events') {			$classes = str_replace('menu-item', 'menu-item current_page_item', $classes);			remove_filter('nav_menu_css_class', 'namespace_menu_classes', 10, 2);		}	}	return $classes;}add_filter('nav_menu_css_class', 'namespace_menu_classes', 10, 2);//Run before html is outputfunction before_html(){	$page_object = get_queried_object();	$page_id = get_queried_object_id();}add_action('before_html', 'before_html');// custom excerpt lengthfunction custom_excerpt_length($length) {	return 20;}add_filter('excerpt_length', 'custom_excerpt_length');?>